<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Click2Fetch.ViewModels"
        x:Class="Click2Fetch.Views.EditAttributeDialog"
        x:DataType="vm:EditAttributeDialogViewModel"
        Title="{Binding DialogTitle}"
        Icon="avares://Click2Fetch/icon.jpeg"
        Width="420" Height="340"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Background="{Binding DialogBg}"
        RequestedThemeVariant="{Binding ActualThemeVariant}">

    <Border Background="{Binding DialogCardBg}" 
            CornerRadius="12" 
            Margin="16"
            Padding="24"
            BorderBrush="{Binding DialogBorder}"
            BorderThickness="1">
        <StackPanel Spacing="20">
            <!-- Header -->
            <TextBlock Text="{Binding DialogTitle}"
                       FontSize="20"
                       FontWeight="SemiBold"
                       Foreground="{Binding DialogTextPrimary}"/>

            <!-- Name Input -->
            <StackPanel Spacing="6">
                <TextBlock Text="{Binding L_KeyLabel}"
                           FontSize="13"
                           Foreground="{Binding DialogTextSecondary}"/>
                <TextBox x:Name="KeyInput"
                         Text="{Binding Key}"
                         Watermark="{Binding L_KeyPlaceholder}"
                         Background="{Binding DialogInputBg}"
                         Foreground="{Binding DialogTextPrimary}"
                         BorderBrush="{Binding DialogBorder}"
                         CaretBrush="{Binding DialogCaretBrush}"
                         CornerRadius="8"
                         Padding="12,10"
                         FontSize="14"
                         KeyDown="OnKeyDown"/>
            </StackPanel>

            <!-- Value Input -->
            <StackPanel Spacing="6">
                <TextBlock Text="{Binding L_ValueLabel}"
                           FontSize="13"
                           Foreground="{Binding DialogTextSecondary}"/>
                <Grid ColumnDefinitions="*,Auto">
                    <TextBox x:Name="ValueInput"
                             Grid.Column="0"
                             Text="{Binding Value}"
                             Watermark="{Binding L_ValuePlaceholder}"
                             Background="{Binding DialogInputBg}"
                             Foreground="{Binding DialogTextPrimary}"
                             BorderBrush="{Binding DialogBorder}"
                             CaretBrush="{Binding DialogCaretBrush}"
                             CornerRadius="8"
                             Padding="12,10"
                             FontSize="14"
                             KeyDown="OnKeyDown"/>
                    <Button Grid.Column="1"
                            Content="{Binding L_Browse}"
                            Command="{Binding BrowseFileCommand}"
                            IsVisible="{Binding ShowBrowseButton}"
                            Background="{Binding DialogSecondaryButtonBg}"
                            Foreground="{Binding DialogTextSecondary}"
                            CornerRadius="8"
                            Padding="12,10"
                            Margin="8,0,0,0"
                            BorderThickness="1"
                            BorderBrush="{Binding DialogSecondaryButtonBorder}">
                        <Button.Styles>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Background" Value="#F3F4F6"/>
                                <Setter Property="Foreground" Value="{Binding $parent[Window].((vm:EditAttributeDialogViewModel)DataContext).DialogButtonBg}"/>
                                <Setter Property="BorderBrush" Value="{Binding $parent[Window].((vm:EditAttributeDialogViewModel)DataContext).DialogButtonBg}"/>
                            </Style>
                            <Style Selector="Button:pressed">
                                <Setter Property="Opacity" Value="0.8"/>
                            </Style>
                        </Button.Styles>
                    </Button>
                </Grid>
            </StackPanel>

            <!-- Buttons -->
            <Grid ColumnDefinitions="Auto,*,Auto,Auto" Margin="0,8,0,0">
                <Button Grid.Column="0"
                        IsVisible="{Binding IsEditMode}"
                        Command="{Binding DeleteCommand}"
                        Background="{Binding DialogDeleteButtonBg}"
                        Foreground="#EF4444"
                        CornerRadius="8"
                        Padding="16,10"
                        BorderThickness="1"
                        BorderBrush="{Binding DialogDeleteButtonBorder}">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="BorderBrush" Value="{Binding $parent[Window].((vm:EditAttributeDialogViewModel)DataContext).DialogDeleteButtonBorder}"/>
                            <Setter Property="Background" Value="#FEE2E2"/>
                            <Setter Property="Foreground" Value="#EF4444"/>
                        </Style>
                        <Style Selector="Button:pressed">
                            <Setter Property="Opacity" Value="0.8"/>
                        </Style>
                    </Button.Styles>
                    <StackPanel Orientation="Horizontal" Spacing="6">
                        <TextBlock Text="ðŸ—‘ï¸" FontSize="12"/>
                        <TextBlock Text="{Binding L_Delete}"/>
                    </StackPanel>
                </Button>
                <Button Grid.Column="2"
                        Content="{Binding L_Cancel}"
                        Command="{Binding CancelCommand}"
                        Background="{Binding DialogSecondaryButtonBg}"
                        Foreground="{Binding DialogTextSecondary}"
                        CornerRadius="8"
                        Padding="20,10"
                        Margin="0,0,8,0"
                        BorderThickness="1"
                        BorderBrush="{Binding DialogSecondaryButtonBorder}">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#F3F4F6"/>
                            <Setter Property="Foreground" Value="{Binding $parent[Window].((vm:EditAttributeDialogViewModel)DataContext).DialogButtonBg}"/>
                            <Setter Property="BorderBrush" Value="{Binding $parent[Window].((vm:EditAttributeDialogViewModel)DataContext).DialogButtonBg}"/>
                        </Style>
                        <Style Selector="Button:pressed">
                            <Setter Property="Opacity" Value="0.8"/>
                        </Style>
                    </Button.Styles>
                </Button>
                <Button Grid.Column="3"
                        x:Name="ConfirmButton"
                        Content="{Binding L_Save}"
                        Command="{Binding ConfirmCommand}"
                        Background="{Binding DialogButtonBg}"
                        Foreground="#FFFFFF"
                        CornerRadius="8"
                        Padding="20,10"
                        BorderThickness="0"
                        KeyDown="OnConfirmKeyDown">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="{Binding $parent[Window].((vm:EditAttributeDialogViewModel)DataContext).DialogButtonBg}"/>
                            <Setter Property="Foreground" Value="#FFFFFF"/>
                            <Setter Property="Opacity" Value="0.9"/>
                        </Style>
                        <Style Selector="Button:pressed">
                            <Setter Property="Opacity" Value="0.8"/>
                        </Style>
                    </Button.Styles>
                </Button>
            </Grid>
        </StackPanel>
    </Border>
</Window>